<div class="p-4">
  <div *ngIf="book">
    <img
      [src]="book.image"
      alt="{{ book.name }}"
      class="w-full rounded-lg h-48 object-cover mb-4"
    />
    <div class="text-2xl font-bold mb-2">{{ book.name }}</div>
    <p class="text-gray-700 mb-1">{{ book.description }}</p>
    <div class="text-sm text-gray-600 mb-1">Author: {{ book.author }}</div>
    <div class="text-sm text-gray-600">Category: {{ book.category }}</div>

    <div class="flex items-center gap-3 my-4">
      <button
        class="bg-green-500 px-4 py-2 rounded text-white hover:bg-green-600 flex items-center"
        (click)="addToBasket()"
      >
        Add to Basket
      </button>

      <button
        routerLink="/"
        class="bg-blue-500 px-4 py-2 rounded text-white hover:bg-blue-600 flex items-center"
      >
        Back to Dashboard
      </button>
    </div>

    <div class="flex items-center mb-4">
      <span class="text-lg font-semibold mr-2">Rating:</span>
      <div class="flex items-center">
        <svg
          *ngFor="let star of starsArray(true); let i = index"
          (click)="setRating(i + 1)"
          class="w-5 h-5 text-yellow-500 cursor-pointer"
          xmlns="http://www.w3.org/2000/svg"
          viewBox="0 0 24 24"
          fill="currentColor"
          [attr.title]="'Star ' + (i + 1)"
        >
          <path
            d="M12 17.27L18.18 21 16.54 13.97 22 9.24l-8.09-1.18L12 2 10.09 8.06 2 9.24l5.46 4.73L5.82 21z"
          />
        </svg>

        <svg
          *ngFor="let star of starsArray(false); let i = index"
          (click)="setRating((book.rating || 0) + i + 1)"
          class="w-5 h-5 text-gray-300 cursor-pointer"
          xmlns="http://www.w3.org/2000/svg"
          viewBox="0 0 24 24"
          fill="currentColor"
          [attr.title]="'Star ' + (i + 1)"
        >
          <path
            d="M12 17.27L18.18 21 16.54 13.97 22 9.24l-8.09-1.18L12 2 10.09 8.06 2 9.24l5.46 4.73L5.82 21z"
          />
        </svg>
      </div>
      <span class="text-gray-600 ml-2"
        >{{ book.rating ? book.rating.toFixed(1) : "N/A" }} / 5</span
      >
    </div>
  </div>

  <div class="mb-6">
    <h3 class="text-lg font-semibold mb-2">Comments</h3>
    <textarea class="w-full p-2 border rounded" placeholder="Add a comment..." rows="4"></textarea>
  </div>

  <hr class="border-[5px] rounded-lg" />

  <div class="mt-8">
    <h2 class="text-xl font-semibold mb-4">Popular Books</h2>
    <div class="flex flex-wrap gap-4">
      <div
        *ngFor="let popularBook of popularBooks"
        class="bg-white shadow-md rounded-lg p-4 w-full md:w-1/2 lg:w-1/3 xl:w-1/4"
      >
        <img
          [src]="popularBook.image"
          alt="{{ popularBook.name }}"
          class="w-full h-48 object-cover rounded-t-lg mb-4"
        />
        <div class="text-xl font-bold mb-2">{{ popularBook.name }}</div>
        <p class="text-gray-700 mb-2">{{ popularBook.description }}</p>
        <div class="text-sm text-gray-600 mb-1">
          Author: {{ popularBook.author }}
        </div>
        <div class="text-sm text-gray-600">
          Category: {{ popularBook.category }}
        </div>
        <div class="flex items-center mt-2">
          <span class="text-lg font-semibold mr-2">Rating:</span>
          <div class="flex items-center">
            <svg
              *ngFor="let star of starsArray(true); let i = index"
              class="w-5 h-5 text-yellow-500"
              xmlns="http://www.w3.org/2000/svg"
              viewBox="0 0 24 24"
              fill="currentColor"
              [attr.title]="'Star ' + (i + 1)"
            >
              <path
                d="M12 17.27L18.18 21 16.54 13.97 22 9.24l-8.09-1.18L12 2 10.09 8.06 2 9.24l5.46 4.73L5.82 21z"
              />
            </svg>

            <svg
              *ngFor="let star of starsArray(false); let i = index"
              class="w-5 h-5 text-gray-300"
              xmlns="http://www.w3.org/2000/svg"
              viewBox="0 0 24 24"
              fill="currentColor"
              [attr.title]="'Star ' + (i + 1)"
            >
              <path
                d="M12 17.27L18.18 21 16.54 13.97 22 9.24l-8.09-1.18L12 2 10.09 8.06 2 9.24l5.46 4.73L5.82 21z"
              />
            </svg>
          </div>
          <span class="text-gray-600 ml-2"
            >{{ popularBook.rating ? popularBook.rating.toFixed(1) : "N/A" }} /
            5</span
          >
        </div>
      </div>
    </div>
  </div>
</div>
